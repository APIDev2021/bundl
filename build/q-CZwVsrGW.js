import{g as k,d as i,q as b,C as p,l as d,F as L,c as V,i as C,j as m,I as g,f as h,z as B,p as M,G as P,k as v,y as T}from"./q-BdDSi9nv.js";import{_ as f}from"./q-DYCSKtUC.js";import{c as j}from"./q-BgjSFZm0.js";import"./q-Cz-7Hhfq.js";import"./q-D9NwOz60.js";import"./q-DoRKf1BZ.js";import"./q-DIv8apt4.js";import"./q-dnNchd-B.js";import"./q-DnI1uH7Q.js";import"./q-DptbZ0GK.js";import"./q-5P4CwBkD.js";import"./q-BvogGR6i.js";const E=2,y=e=>{var t;return{id:j(),level:0,row:e,children:[],indeterminate:!1,expanded:!1,expandable:!1,checked:!1,searchValue:(((t=e.tags)==null?void 0:t[e.tags.length-1])||e.keyword||"").toLowerCase()}},x=(e,t)=>{e.checked=t,e.checked&&(e.indeterminate=!1),e.children.forEach(c=>x(c,t));let r=e;for(let c=0;c<E&&(r=r.parent,!!r);c+=1){const n=r.children.every(l=>l.checked),o=r.children.every(l=>!l.checked&&!l.indeterminate);r.checked=n,r.indeterminate=!n&&!o}},_=(e,t)=>{e.expandable&&(e.expanded=t)},S=e=>{e.expandable=e.children.length>0,e.children.length>0&&e.children.forEach(S)},I=(e,t)=>{e.forEach(r=>{r.row.seperator||(t(r),I(r.children,t))})},A=e=>{if(!e[0].tags)return e.map(y);const t=[];return e.forEach(r=>{const c=y(r);if(r.tags.length===1)t.push(c);else{let n=t.find(o=>{var l,a;return((l=o.row.tags)==null?void 0:l[0])===((a=r.tags)==null?void 0:a[0])});if(!n)return;for(let o=1;o<E+1;o+=1){const l=n.children.find(a=>{var s,u;return((s=a.row.tags)==null?void 0:s[o])===((u=r.tags)==null?void 0:u[o])});if(!l){n==null||n.children.push({...c,parent:n,level:o});break}n=l}}}),t.forEach(S),t},z=()=>{var r;const[e,t]=k();return(r=e.onCheckedChange$)==null?void 0:r.call(e,t)},O=Object.freeze(Object.defineProperty({__proto__:null,_hW:T,s_H8vaRHQA4gA:z},Symbol.toStringTag,{value:"Module"})),F=e=>i("div",{class:["table-checkbox",{"table-checkbox-checked":e.node.checked,"table-checkbox-indeterminate":e.node.indeterminate}],onClick$:b(()=>f(()=>import("./q-hKGkxSjt.js"),[]),"s_4q0bxatGsWk",[e])},null,i("span",null,{class:"table-checkbox-inner"},i("span",null,{class:"table-checkbox-mark"},null,3,null),3,null),2,"qW_0"),D=(e,t)=>({class:["table-cell",e.cellClass,t==="body"&&e.bodyCellClass].filter(Boolean).join(" "),style:{...e.style,...t==="header"?e.headerCellStyle:{}}}),R=new Intl.NumberFormat("en-US",{notation:"compact"}),Q=e=>new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:3}).format(e),H=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),N=(e,t)=>e.formatType==="compact"&&typeof t=="number"?e.field==="visits"?Q(t):R.format(t):e.formatType==="percent"&&typeof t=="number"?H.format(t/100):t,q=e=>Array.isArray(e)?e[e.length-1]:typeof e=="object"?e.value:e,$=e=>{const t=b(()=>f(()=>import("./q-DiIHw1SM.js"),[]),"s_DQ72LegYCx8",[e]);return t.resolve(),i("svg",{class:["table-cell-expand",{"table-cell-expand-active":e.node.expanded,"table-cell-expand-hidden":!e.node.expandable}]},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick$:t},i("path",null,{d:"M6 4L11 8L6 12V4Z",fill:"#B2B2C2"},null,3,null),3,"SH_0")},U=()=>i("svg",null,{width:"9",height:"9",viewBox:"0 0 9 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i("path",null,{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.933058 8.06694C1.17714 8.31102 1.57286 8.31102 1.81694 8.06694L7 2.88388V6.375C7 6.72018 7.27982 7 7.625 7C7.97018 7 8.25 6.72018 8.25 6.375V1.375C8.25 1.02982 7.97018 0.75 7.625 0.75H2.625C2.27982 0.75 2 1.02982 2 1.375C2 1.72018 2.27982 2 2.625 2H6.11612L0.933058 7.18306C0.688981 7.42714 0.688981 7.82286 0.933058 8.06694Z",fill:"#057A53"},null,3,null),3,"Jl_0"),G=()=>i("svg",null,{width:"9",height:"8",viewBox:"0 0 9 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i("path",null,{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.933058 0.683058C1.17714 0.438981 1.57286 0.438981 1.81694 0.683058L7 5.86612V2.375C7 2.02982 7.27982 1.75 7.625 1.75C7.97018 1.75 8.25 2.02982 8.25 2.375V7.375C8.25 7.72018 7.97018 8 7.625 8H2.625C2.27982 8 2 7.72018 2 7.375C2 7.02982 2.27982 6.75 2.625 6.75H6.11612L0.933058 1.56694C0.688981 1.32286 0.688981 0.927136 0.933058 0.683058Z",fill:"#D10412"},null,3,null),3,"Pl_0"),w=new Intl.NumberFormat("en-US",{style:"percent"}),W=e=>{p();const t=e.value.change.diff>0,r=(t?"+":"")+w.format(e.value.change.diff);return i("div",{class:["visibility-renderer",`visibility-renderer-${t?"positive":"negative"}`]},null,[i("div",null,{class:"visibility-renderer-value"},[w.format(e.value.value),t?d(U,null,3,"70_0"):d(G,null,3,"70_1")],1,null),i("div",null,{class:"visibility-renderer-badge"},r,1,null)],1,"70_2")},Z=e=>{p();const t=e.node.row[e.columnDef.field],r=q(t);return d(L,{children:e.columnDef.field!=="visibility"?N(e.columnDef,r):d(W,{value:t},3,"70_3")},1,"70_4")},J=V(b(()=>f(()=>import("./q-Dot2hqq-.js"),[]),"s_HxEpILOhwog")),X=e=>{var r;p();const t=e.columnDef.field==="tags";return C("div",{...D(e.columnDef,"body"),children:[t&&d($,{get node(){return e.node},[m]:{node:g(e,"node")}},3,"eB_0"),e.columnDef.checkbox&&e.editMode&&d(F,{...e},0,"eB_1"),e.index===0&&e.node.row.badge&&i("div",null,{class:"table-cell-badge"},h(e.node.row,"badge"),1,"eB_2"),e.columnDef.field==="country"&&((r=e.node.row.country)==null?void 0:r.code)&&i("div",null,{class:"table-cell-code"},[i("span",{class:`fi fi-${e.node.row.country.code}`},null,null,3,null),i("div",null,null,h(e.node.row.country,"name"),1,null)],1,"eB_3"),e.columnDef.field==="trafficShare"&&i("div",null,{class:"table-cell-trafficShare"},d(J,{value:e.node.row.trafficShare??0},3,"eB_4"),1,"eB_5"),d(Z,{get node(){return e.node},get columnDef(){return e.columnDef},[m]:{node:g(e,"node"),columnDef:g(e,"columnDef")}},3,"eB_6")]},null,0,"eB_7")},me=e=>{var o;B(b(()=>f(()=>Promise.resolve().then(()=>re),void 0),"s_iLyG7PNiCfc"));const t=M(()=>A(e.rowData),{deep:!0});(o=e.onMounted$)==null||o.call(e,t);const r=l=>{var a;return!((a=e.query)!=null&&a.value)||l.searchValue&&l.searchValue.includes(e.query.value.toLowerCase())},c=l=>i("div",{class:["table-row",`table-row-level-${l.level}`,{"table-row-seperator":l.row.seperator,"table-row-hidden":!l.row.seperator&&!r(l)}]},null,l.row.seperator?i("div",null,{class:"table-cell"},h(l.row,"label"),1,"ge_0"):e.columnDefs.map((a,s)=>d(X,{index:s,node:l,get editMode(){return e.editMode},columnDef:a,onCheckedChange$:b(()=>f(()=>Promise.resolve().then(()=>O),void 0),"s_H8vaRHQA4gA",[e,t]),[m]:{editMode:v(u=>u.editMode,[e])}},2,a.field)),1,l.id),n=l=>{const a=[];return a.push(c(l)),l.children.length>0&&l.expanded&&l.children.forEach(s=>{a.push(...n(s))}),a};return P(b(()=>f(()=>Promise.resolve().then(()=>K),void 0),"s_Qg5L77MI7JQ",[t])),i("div",null,{class:v(l=>["table",l.class],[e])},[i("div",null,{class:"table-header"},i("div",null,{class:"table-row"},e.columnDefs.map((l,a)=>C("div",{...D(l,"header"),children:h(l,"label")},null,0,a)),1,null),1,null),i("div",null,{class:"table-body-wrapper"},i("div",null,{class:"table-body"},t.map(l=>n(l)),1,null),1,null)],1,"ge_1")},Y=()=>{const[e]=k(),t=e.find(r=>r.expandable);x(e[0],!0),x(e[0],!1),t&&(_(t,!0),_(t,!1))},K=Object.freeze(Object.defineProperty({__proto__:null,_hW:T,s_Qg5L77MI7JQ:Y},Symbol.toStringTag,{value:"Module"})),ee=".table-checkbox{cursor:pointer;display:inline-block}.table-checkbox-checked .table-checkbox-inner{background-color:transparent;border-color:#713dff}.table-checkbox-checked .table-checkbox-inner .table-checkbox-mark{opacity:1}.table-checkbox-indeterminate .table-checkbox-inner{background-color:transparent;border-color:#713dff}.table-checkbox-indeterminate .table-checkbox-inner .table-checkbox-mark{height:2px;opacity:1}.table-checkbox-inner{align-items:center;background-color:#ffffff0a;border:1px solid rgba(255,255,255,.12);border-radius:50%;display:flex;height:16px;justify-content:center;transition:.45s cubic-bezier(.6,.6,0,1) background-color,.45s cubic-bezier(.6,.6,0,1) border-color;width:16px}.table-checkbox-mark{background-color:#713dff;border-radius:999px;height:8px;opacity:0;transition:.45s cubic-bezier(.6,.6,0,1) opacity,.45s cubic-bezier(.6,.6,0,1) height;width:8px}",te='.table-cell-badge,.table-cell{font-size:14px;font-weight:400;letter-spacing:-.006em;line-height:20px}.table-header{background:#ffffff0a;display:flex}.table-header .table-cell{height:36px;padding-left:0;padding-right:12px}.table-body-wrapper{background:linear-gradient(180deg,#ffffff14,#fff0 57.81%);height:285px;overflow:hidden auto;position:relative;z-index:999}.table-body-wrapper::-webkit-scrollbar{width:0}.table-body .table-row{background-color:#0a011833;transition:.45s cubic-bezier(.6,.6,0,1) background-color}.table-body .table-cell{align-items:center;display:flex;padding-left:0;padding-right:12px}.table-body .table-cell-expand{cursor:pointer;margin-right:4px;transition:.3s ease transform}.table-body .table-cell-expand-hidden{height:0;opacity:0}.table-body .table-cell-expand-active{transform:rotate(90deg)}.table-row{align-items:center;display:flex;overflow:hidden;position:relative;width:100%}.table-row-level-1 .table-cell:first-child{padding-left:34px}.table-row-level-2 .table-cell:first-child{padding-left:54px}.table-row-level-3 .table-cell:first-child{padding-left:74px}.table-row-level-4 .table-cell:first-child{padding-left:94px}.table-row-hidden{animation:rowClosing .5s cubic-bezier(.6,.6,0,1) forwards}.table-row-seperator{background-color:#ffffff0a!important;width:100%}.table-row-seperator:hover{background-color:#ffffff0a}.table-row-seperator .table-cell{height:36px;padding-left:12px;padding-right:12px}.table-row:hover .visibility-renderer-value{opacity:0;transform:translate(10px)}.table-row:hover .visibility-renderer-badge{opacity:1;transform:translate(0)}.table-header .table-row:before,.table-body .table-row:not(:last-child):before{background:var(--row-border, linear-gradient(90deg, rgba(255, 255, 255, .016) 0%, rgba(255, 255, 255, .04) 50%, rgba(255, 255, 255, .016) 100%));bottom:0;content:"";height:1px;left:0;position:absolute;width:100%}.table-cell{align-items:center;color:#fff;display:flex;height:40px;justify-content:flex-end;text-align:right}.table-cell-border-right{border-right:1px solid rgba(255,255,255,.08)}.table-cell .table-checkbox{margin-right:8px}.table-cell:first-child{justify-content:flex-start;padding-left:16px;text-align:left}.table-cell-badge{background:#ffffff0a;border:1px solid rgba(255,255,255,.1);border-radius:6px;color:#b2b2c2;margin-right:6px;padding:2px 8px}.visibility-renderer{position:relative}.visibility-renderer-value,.visibility-renderer-badge{transition:cubic-bezier(.6,.6,0,1) .3s opacity,cubic-bezier(.6,.6,0,1) .3s transform}.visibility-renderer-value{align-items:center;display:flex}.visibility-renderer-value svg{height:6px;margin-left:3px;width:6px}.visibility-renderer-badge{border-radius:4px;opacity:0;padding:2px 4px;position:absolute;right:-1px;top:-3px;transform:translate(-10px)}.visibility-renderer-positive .visibility-renderer-badge{background:#057a531f;color:#12b881}.visibility-renderer-negative .visibility-renderer-badge{background:#d104121f;color:#d10412}.table-body .table-row:not(.table-body .table-row-level-0){animation:rowOpening .5s cubic-bezier(.6,.6,0,1) forwards;height:0;overflow:hidden}@keyframes rowOpening{0%{height:0}to{height:40px}}@keyframes rowClosing{0%{height:40px}to{height:0;opacity:0;visibility:hidden}}',le=te+ee,re=Object.freeze(Object.defineProperty({__proto__:null,s_iLyG7PNiCfc:le},Symbol.toStringTag,{value:"Module"}));export{T as _hW,x as a,me as b,Y as c,le as d,I as f,_ as s,z as s_H8vaRHQA4gA};
